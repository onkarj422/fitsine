(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/YUa":function(e,t){e.exports=".food-table {\n  display: flex;\n  flex-direction: column;\n  max-height: 500px;\n  min-width: 700px;\n  overflow: auto; }\n\n.mat-cell {\n  display: table-cell;\n  min-width: 90px;\n  vertical-align: middle;\n  font-size: 12px; }\n"},"2vbI":function(e,t){e.exports=".add-fab {\n  position: fixed;\n  bottom: 5%;\n  right: 5%; }\n\n.orders-layout {\n  display: flex;\n  flex-direction: column;\n  max-height: 500px;\n  min-width: 800px;\n  overflow: auto; }\n\n.mat-cell {\n  display: table-cell;\n  min-width: 90px;\n  vertical-align: middle;\n  font-size: 12px; }\n"},"2xrQ":function(e,t){e.exports=".table-container {\n  display: flex;\n  flex-direction: column;\n  max-height: 500px;\n  min-width: 900px;\n  overflow: auto; }\n\n.mat-cell {\n  display: table-cell;\n  min-width: 90px;\n  vertical-align: middle;\n  font-size: 12px; }\n"},"3B0Z":function(e,t){e.exports=".table-container {\n  display: flex;\n  flex-direction: column;\n  max-height: 500px;\n  min-width: 800px;\n  overflow: auto; }\n\n.mat-form-field {\n  font-size: 14px;\n  width: 100%;\n  margin: 10px; }\n\n.mat-cell {\n  display: table-cell;\n  min-width: 90px;\n  vertical-align: middle;\n  font-size: 12px; }\n"},"8OkK":function(e,t){e.exports='<h2 class="mat-h2">Customers</h2>\n<div class="table-container mat-elevation-z8">\n  <mat-form-field>\n    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search">\n  </mat-form-field>\n  <table mat-table #table matSort [dataSource]="dataSource">\n    <ng-container matColumnDef="id">\n      <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>\n      <td mat-cell *matCellDef="let customer  ; let i = index; ">{{customer.id}}</td>\n    </ng-container>\n    <ng-container matColumnDef="name">\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>\n      <td mat-cell *matCellDef="let customer; let i = index; ">{{customer.firstname}} {{customer.lastname}}</td>\n    </ng-container>\n    <ng-container matColumnDef="mobileNumber">\n      <th mat-header-cell *matHeaderCellDef>Mobile No.</th>\n      <td mat-cell *matCellDef="let customer; let i = index; ">{{customer.mobileNumber}}</td>\n    </ng-container>\n    <ng-container matColumnDef="address">\n      <th mat-header-cell *matHeaderCellDef>Address</th>\n      <td mat-cell *matCellDef="let customer; let i = index; ">{{customer.addresses[0].address}}</td>\n    </ng-container>\n    <ng-container matColumnDef="area">\n      <th mat-header-cell *matHeaderCellDef>Area</th>\n      <td mat-cell *matCellDef="let customer; let i = index; ">{{customer.addresses[0].area}}</td>\n    </ng-container>\n    <ng-container matColumnDef="email">\n      <th mat-header-cell *matHeaderCellDef>Email</th>\n      <td mat-cell *matCellDef="let customer; let i = index; ">{{customer.email}}</td>\n    </ng-container>\n    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>\n  </table>\n</div>\n'},VwET:function(e,t){e.exports='<mat-toolbar #matToolbar custom custom-background="#00e676">\n  <mat-toolbar-row fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="15px">\n    <button fxHide.gt-xs mat-icon-button>\n    \t<mat-icon (click)="sidenav.toggle()">menu</mat-icon>\n    </button>\n    <span mdc-typography-headline>ADMIN</span>\n    <span fxFlex></span>\n    <button mat-icon-button>\n    \t<mat-icon>search</mat-icon>\n    </button>\n  </mat-toolbar-row>\n</mat-toolbar>\n\n<div class="sidenav-layout-container">\n \t<mat-sidenav-container class="sidenav-container">\n    <mat-sidenav class="sidenav-panel" mode="side" opened="media.isActive(\'gt-xs\')" [mdc-elevation]="10" #sidenav>\n      <mat-nav-list>\n        <a mat-list-item [routerLink]="[\'/admin/orders\']">\n          <mat-icon mat-list-icon>add_shopping_cart</mat-icon>\n          <h4 mat-line>Orders</h4>\n        </a>\n        <mdc-list-divider padded="true"></mdc-list-divider>\n        <mat-list-item [routerLink]="[\'/admin/customers\']">\n          <mat-icon mat-list-icon>people</mat-icon>\n          <h4 mat-line>Customers</h4>\n        </mat-list-item>\n        <mdc-list-divider padded="true"></mdc-list-divider>\n        <mat-list-item [routerLink]="[\'/admin/delivery\']">\n          <mat-icon mat-list-icon>motorcycle</mat-icon>\n          <h4 mat-line>Delivery</h4>\n        </mat-list-item>\n        <mdc-list-divider padded="true"></mdc-list-divider>\n        <mat-list-item [routerLink]="[\'/admin/food\']">\n          <mat-icon mat-list-icon>restaurant</mat-icon>\n          <h4 mat-line>Food</h4>\n        </mat-list-item>\n        <mdc-list-divider padded="true"></mdc-list-divider>\n        <mat-list-item>\n          <mat-icon mat-list-icon>payment</mat-icon>\n          <h4 mat-line>Payments</h4>\n        </mat-list-item>\n        <mdc-list-divider padded="true"></mdc-list-divider>\n        <mat-list-item>\n          <h4 (click)="runTaskJob()" mat-line>RUN TASKS</h4>\n        </mat-list-item>\n      </mat-nav-list>\n    </mat-sidenav>\n    <mat-sidenav-content class="sidenav-content">\n      <div class="admin-outlet" #adminOutlet>\n        <router-outlet>\n          \n        </router-outlet>\n      </div>    \n    </mat-sidenav-content>\n  </mat-sidenav-container>\n</div>\n\n'},W298:function(e,t){e.exports='<mat-horizontal-stepper class="mat-elevation-z4" (selectionChange)="selectionChange($event)" #stepper linear>\n  <mat-step [stepControl]="customerForm">\n    <ng-template matStepLabel>CUSTOMER DETAILS</ng-template>\n    <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutAlign="center center" fxLayoutGap="70px" fxLayoutGap.lt-sm="5px">\n      <button (click)="clickEvent.next(true)" color="accent" mat-button>CHOOSE EXISTING</button>\n      <div fxLayout="row" fxLayoutGap="5px">\n        <mdc-list-divider></mdc-list-divider>\n        <span mat-typography-headline>OR</span>\n        <mdc-list-divider></mdc-list-divider>\n      </div>\n      <button (click)="clickEvent.next(false)" color="accent" mat-button>ADD NEW</button>\n    </div>\n    <div custom custom-height="20px"></div>\n    <div *ngIf="existingCustomer else newCustomerForm">\n      <form [formGroup]="customerForm">\n        <div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="10px">\n          <mat-form-field custom custom-width="100%" color="accent">\n            <mat-select placeholder="Select Customers" formControlName="customerId" required>\n              <mat-option *ngFor="let customer of customers" [value]="customer.id">\n                {{customer.id}} - {{customer.firstname}} {{customer.lastname}} - {{customer.addresses[0].area}}\n              </mat-option>\n            </mat-select>\n            <mat-error *ngIf="customerForm.controls.customerId.errors?.required">Customer is <strong>required!</strong></mat-error>\n            <mat-hint>Choose a customer</mat-hint>\n          </mat-form-field>\n        </div>\n      </form>\n    </div>\n    <ng-template #newCustomerForm>\n      <form [formGroup]="customerForm">\n        <div fxLayout="column" fxLayoutGap="10px">\n          <mat-form-field color="accent">\n            <input matInput type="text" name="firstname" placeholder="First Name" formControlName="firstname" required>\n            <mat-error *ngIf="customerForm.controls.firstname.errors?.required">Your full name is <strong>required!</strong></mat-error>\n          </mat-form-field>\n          <mat-form-field color="accent">\n            <input matInput type="text" name="lastname" placeholder="Last Name" formControlName="lastname" required>\n            <mat-error *ngIf="customerForm.controls.lastname.errors?.required">Your full name is <strong>required!</strong></mat-error>\n          </mat-form-field>\n          <div fxLayout="row" fxLayoutGap="10px">\n            <mat-form-field custom custom-width="100%" color="accent" hintLabel="Max 10 digits">\n              <input matInput (keypress)="mobileNoValidation($event)" #contactInput type="text" name="mobileNumber" placeholder="Mobile Number" minlength="10" maxlength="10" formControlName="mobileNumber" required>\n              <mat-hint align="end">{{contactInput.value?.length || 0}}/10</mat-hint>\n              <mat-error *ngIf="customerForm.controls.mobileNumber.errors?.required">Mobile number is <strong>required!</strong></mat-error>\n              <mat-error *ngIf="customerForm.controls.mobileNumber.errors?.minlength">Mobile number should be exactly 10 digits!</mat-error>\n            </mat-form-field>\n            <mat-form-field custom custom-width="100%" color="accent" hintLabel="Optional">\n              <input matInput placeholder="Email" type="email" name="email" formControlName="email">\n              <mat-error *ngIf="customerForm.controls.email.errors?.email">Please, enter a valid email address!</mat-error>\n            </mat-form-field>\n          </div>\n          <mat-form-field custom custom-width="100%" color="accent" hintLabel="Flat/House Number, Building/Apartment, Street">\n            <textarea matInput name="address" placeholder="Street Address" formControlName="address"></textarea>\n            <mat-error *ngIf="customerForm.controls.address.errors?.required">Address is <strong>required!</strong></mat-error>\n          </mat-form-field>\n          <mat-form-field color="accent">\n            <input matInput type="text" name="area" placeholder="Area" formControlName="area" required>\n            <mat-error *ngIf="customerForm.controls.area.errors?.required">Area is <strong>required!</strong></mat-error>\n          </mat-form-field>\n        </div>\n      </form>\n    </ng-template>\n  </mat-step>\n  <mat-step>\n    <ng-template matStepLabel>ORDER DETAILS</ng-template>\n    <form [formGroup]="orderForm">\n      <div fxLayout="column" fxLayoutGap="10px">\n        <mat-form-field color="accent">\n          <mat-select placeholder="Meal Plan" formControlName="mealId" required>\n            <mat-option *ngFor="let meal of mealPlans" (click)="setMaxCount(meal.deliveryCount)" [value]="meal.id">\n              {{meal.name}}\n            </mat-option>\n          </mat-select>\n          <mat-error *ngIf="orderForm.controls.mealId.errors?.required">Please choose a meal plan!</mat-error>\n          <mat-hint>Choose a meal plan.</mat-hint>\n        </mat-form-field>\n        <mat-form-field color="accent">\n          <mat-select placeholder="Meal Size" formControlName="mealSize" required>\n            <mat-option *ngFor="let size of mealSizes" [value]="size.id">\n              {{size.description}}\n            </mat-option>\n          </mat-select>\n          <mat-error *ngIf="orderForm.controls.mealSize.errors?.required">Please choose a meal size!</mat-error>\n          <mat-hint>Choose the size of meal</mat-hint>\n        </mat-form-field>\n        <mat-form-field color="accent">\n          <mat-select placeholder="Type" formControlName="preferredFoodTypeId" (selectionChange)="onSelectFoodType($event)" required>\n            <mat-option *ngFor="let type of foodTypes" [value]="type.id">\n              {{type.value}}\n            </mat-option>\n          </mat-select>\n          <mat-error *ngIf="orderForm.controls.preferredFoodTypeId.errors?.required">Please choose type!</mat-error>\n          <mat-hint>Is it veg, non-veg or both?</mat-hint>\n        </mat-form-field>\n        <mat-form-field color="accent">\n          <mat-select placeholder="Salads" formControlName="saladId" #saladSelect required multiple>\n            <mat-option #saladOption [disabled]="saladSelect.selected.length >= saladMaxCount && !saladOption.selected" *ngFor="let salad of saladsForSort" (click)="updateSelectedCount(saladSelect.selected.length)" [value]="salad.id">\n              {{salad.name}}\n            </mat-option>\n          </mat-select>\n          <mat-error *ngIf="orderForm.controls.saladId.errors?.required">Please choose some salads!</mat-error>\n          <mat-hint>Choose the customer\'s favorite salads</mat-hint>\n        </mat-form-field>\n        <mat-form-field color="accent">\n          <textarea matInput name="saladSpecs" placeholder="Salad extra specifications" formControlName="saladSpecs"></textarea>\n        </mat-form-field>\n      </div>\n    </form>\n  </mat-step>\n  <mat-step>\n    <ng-template matStepLabel>DELIVERY DETAILS</ng-template>\n    <form [formGroup]="deliveryForm">\n      <div fxLayout="column" fxLayoutGap="10px">\n        <mat-form-field custom custom-width="100%" color="accent" hintLabel="Flat/House Number, Building/Apartment, Street">\n          <textarea matInput name="deliveryAddress" placeholder="Address" formControlName="deliveryAddress" #addressText></textarea>\n          <mat-error *ngIf="deliveryForm.controls.deliveryAddress.errors?.required">Address is <strong>required!</strong></mat-error>\n        </mat-form-field>\n        <mat-form-field color="accent">\n          <input matInput type="text" name="deliveryArea" placeholder="Area" formControlName="deliveryArea" required>\n          <mat-error *ngIf="deliveryForm.controls.deliveryArea.errors?.required">Area is <strong>required!</strong></mat-error>\n        </mat-form-field>\n        <mat-form-field custom custom-width="100%" color="accent" hintLabel="Max 10 digits">\n          <input matInput (keypress)="mobileNoValidation($event)" #contactInput type="text" name="deliveryContact" placeholder="Mobile Number" minlength="10" maxlength="10" formControlName="deliveryContact" required>\n          <mat-hint align="end">{{contactInput.value?.length || 0}}/10</mat-hint>\n          <mat-error *ngIf="deliveryForm.controls.deliveryContact.errors?.required">Mobile number is <strong>required!</strong></mat-error>\n          <mat-error *ngIf="deliveryForm.controls.deliveryContact.errors?.minlength">Mobile number should be exactly 10 digits!</mat-error>\n        </mat-form-field>\n        <div custom custom-height="10px"></div>\n        <mdc-list-divider></mdc-list-divider>\n        <mat-form-field color="accent">\n          <mat-select #timeSlotSelect placeholder="Delivery Time Slot" formControlName="timeSlotId" required>\n            <mat-option #timeSlotOption *ngFor="let time of times" [value]="time.id">\n              {{time.time}}\n            </mat-option>\n          </mat-select>\n          <mat-error *ngIf="deliveryForm.controls.timeSlotId.errors?.required">Please select a time!</mat-error>\n          <mat-hint>Select delivery time</mat-hint>\n        </mat-form-field>\n        <div *ngIf="timeSlotSelect.selected">\n          <div *ngIf="timeSlotSelect.selected.value == 1 || timeSlotSelect.selected.value == 3">\n            <label>Morning Timeslot</label>\n            <div fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayout.xs="column" fxLayout="row">\n              <mat-form-field color="accent">\n                <input matInput type="text" placeholder="From" mat-time-picker formControlName="morningStart" required>\n                <button mat-button matPrefix mat-icon-button>\n                  <mat-icon>access_time</mat-icon>\n                </button>\n              </mat-form-field>\n              <mat-form-field color="accent">\n                <input matInput type="text" placeholder="To" mat-time-picker formControlName="morningEnd" required>\n                <button mat-button matPrefix mat-icon-button>\n                  <mat-icon>access_time</mat-icon>\n                </button>\n              </mat-form-field>\n            </div>\n          </div>\n          <div *ngIf="timeSlotSelect.selected.value == 2 || timeSlotSelect.selected.value == 3">\n            <label>Evening Timeslot</label>\n            <div fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayout.xs="column" fxLayout="row">\n              <mat-form-field color="accent">\n                <input matInput type="text" placeholder="From" mat-time-picker formControlName="eveningStart" required>\n                <button mat-button matPrefix mat-icon-button>\n                  <mat-icon>access_time</mat-icon>\n                </button>\n              </mat-form-field>\n              <mat-form-field color="accent">\n                <input matInput type="text" placeholder="To" mat-time-picker formControlName="eveningEnd" required>\n                <button mat-button matPrefix mat-icon-button>\n                  <mat-icon>access_time</mat-icon>\n                </button>\n              </mat-form-field>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </mat-step>\n</mat-horizontal-stepper>\n<div custom custom-height="10px"></div>\n<div fxLayout="column">\n  <button *ngIf="!finalStep" fxFlexAlign="end" (click)="stepper.next()" color="accent" mat-raised-button>NEXT</button>\n  <button *ngIf="finalStep" fxFlexAlign="end" (click)="submitOrder()" color="accent" mat-raised-button>CONFIRM ORDER</button>\n</div>\n'},jkDv:function(e,t,n){"use strict";n.r(t);var o=n("CcnG"),r=n("Ip0R"),a=n("ZYCi"),i=n("OzfB"),l=n("Dd7p"),s=n("BMzw"),m=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t,n){this.media=e,this.event=t,this.task=n,this.mobileDevice=!0,this.mobileDevice=this.media.isActive("xs")}return e.prototype.ngOnInit=function(){this.hideOnScroll()},e.prototype.runTaskJob=function(){this.task.runTaskJob()},e.prototype.hideOnScroll=function(){var e=this,t=window.pageYOffset;window.addEventListener("scroll",function(){var n=window.pageYOffset;t>n?(e.event.hideOnScroll("0"),e.matToolbar._elementRef.nativeElement.style.position="relative",e.adminOutlet.nativeElement.style.top="0",e.matToolbar._elementRef.nativeElement.style.zIndex="0"):(e.event.hideOnScroll("-64px"),e.matToolbar._elementRef.nativeElement.style.position="fixed",e.matToolbar._elementRef.nativeElement.style.zIndex="9999",e.adminOutlet.nativeElement.style.position="relative",e.adminOutlet.nativeElement.style.top="64px"),t=n})},e.prototype.ngOnDestroy=function(){window.removeEventListener("scroll",function(){})},m([Object(o.Ma)("sidenav"),d("design:type",Object)],e.prototype,"sidenav",void 0),m([Object(o.Ma)("matToolbar"),d("design:type",Object)],e.prototype,"matToolbar",void 0),m([Object(o.Ma)("adminOutlet"),d("design:type",Object)],e.prototype,"adminOutlet",void 0),e=m([Object(o.n)({selector:"app-dashboard",template:n("VwET"),styles:[n("qmxm")]}),d("design:paramtypes",[i.f,l.a,s.a])],e)}(),u=n("Jy3/"),f=n("BHnd"),p=n("OkvK"),h=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e){this.data=e,this.displayedColumns=["id","name","mobileNumber","address","area","email"]}return e.prototype.applyFilter=function(e){e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e},e.prototype.ngOnInit=function(){var e=this;this.data.getIt("customers").subscribe(function(t){e.dataSource=t,e.dataSource=new f.a(t),e.dataSource.sort=e.sort})},h([Object(o.Ma)(p.a),y("design:type",p.a)],e.prototype,"sort",void 0),e=h([Object(o.n)({selector:"app-customers",template:n("8OkK"),styles:[n("3B0Z")]}),y("design:paramtypes",[u.a])],e)}(),b=n("67Y/"),g=n("zvU7"),x=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=function(){function e(e,t,n){this.data=e,this.order=t,this.task=n,this.addFab=!1,this.orderDataColumns=["id","date","mealName","mealSize","foodType","status","payment","customerId"]}return e.prototype.loadData=function(){var e=this;this.data.getIt("orders").pipe(Object(b.a)(function(t){return e.mapOrderData(t)})).subscribe(function(t){e.orderDataSource=new f.a(t)}),this.order.updateOrders.next(!1)},e.prototype.mapOrderData=function(e){for(var t in e)e[t].date=this.order.formatDate(e[t].date);return e},e.prototype.deliveryView=function(e){this.data.getItWhere("o_deliveries","id",e).then(function(e){console.log(e)})},e.prototype.ngOnInit=function(){var e=this;this.loadData(),this.order.updateOrders.asObservable().subscribe(function(t){1==t&&e.loadData()})},e.prototype.ngAfterViewInit=function(){},e=x([Object(o.n)({selector:"app-orders",template:n("uCx5"),styles:[n("2vbI")]}),C("design:paramtypes",[u.a,g.a,s.a])],e)}(),D=n("6g7h"),I=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t,n){this.data=e,this.session=t,this.task=n,this.columns=[{columnDef:"id",header:"ID",cell:function(e){return""+e.id}},{columnDef:"saladName",header:"SALAD",cell:function(e){return""+e.saladName}},{columnDef:"mealSize",header:"MEAL SIZE",cell:function(e){return""+e.mealSize}},{columnDef:"foodType",header:"VEG/NON-VEG",cell:function(e){return""+e.foodType}},{columnDef:"status",header:"STATUS",cell:function(e){return""+e.taskStatus}}],this.actionColumn={columnDef:"action",header:"ACTION",cell:function(e){return""+e.id}},this.displayedColumns=this.columns.map(function(e){return e.columnDef}),this.displayedColumns=this.displayedColumns.concat("action")}return e.prototype.applyFilter=function(e){},e.prototype.loadFoodTasks=function(){this.foodTasksDataSource=new F(this.data,this.session)},e.prototype.loadFoodOrders=function(){this.foodOrdersDataSource=new T(this.data)},e.prototype.setStatusComplete=function(e){var t=this;this.task.setStatus({taskId:e,statusId:2}).subscribe(function(e){1==e.result?t.loadFoodTasks():console.log(e)})},e.prototype.ngOnInit=function(){this.session.userRoleId;this.loadFoodTasks()},I([Object(o.Ma)(p.a),w("design:type",p.a)],e.prototype,"sort",void 0),e=I([Object(o.n)({selector:"app-food",template:n("w8Oo"),styles:[n("/YUa")]}),w("design:paramtypes",[u.a,D.a,s.a])],e)}(),F=function(){function e(e,t){this.data=e,this.session=t}return e.prototype.connect=function(e){return this.data.foodTasksById(this.session.userId)},e.prototype.disconnect=function(e){this.data.foodTasksSubject.complete()},e}(),T=function(){function e(e){this.data=e}return e.prototype.connect=function(e){return this.data.foodOrders},e.prototype.disconnect=function(e){this.data.foodOrdersSubject.complete()},e}(),k=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},N=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},R=function(){function e(e,t,n){var o=this;this.data=e,this.session=t,this.task=n,this.columns=[{columnDef:"id",header:"ID",cell:function(e){return""+e.id}},{columnDef:"customerAddress",header:"ADDRESS",cell:function(e){return""+e.address}},{columnDef:"customerArea",header:"AREA",cell:function(e){return""+e.area}},{columnDef:"customerMobile",header:"MOBILE",cell:function(e){return""+e.mobileNumber}},{columnDef:"customerName",header:"NAME",cell:function(e){return""+e.customerName}},{columnDef:"saladName",header:"SALAD NAME",cell:function(e){return""+e.saladName}},{columnDef:"timing",header:"TIMING",cell:function(e){return o.getProperTiming(e)}},{columnDef:"status",header:"STATUS",cell:function(e){return""+e.taskStatus}}],this.actionColumn={columnDef:"action",header:"ACTION",cell:function(e){return""+e.id}},this.displayedColumns=this.columns.map(function(e){return e.columnDef}),this.displayedColumns=this.displayedColumns.concat("action")}return e.prototype.ngOnInit=function(){3==this.session.userRoleId?this.loadDeliveryTasks():this.loadDeliveryOrders()},e.prototype.loadDeliveryOrders=function(){},e.prototype.loadDeliveryTasks=function(){this.deliveryTasksDataSource=new A(this.data,this.session)},e.prototype.getProperTiming=function(e){return"Morning"==e.timeSlot?e.morningTimeSlot:"Evening"==e.timeSlot?e.eveningTimeSlot:(new Date).getHours()<13?e.morningTimeSlot:e.eveningTimeSlot},e.prototype.setStatusComplete=function(e){var t=this;this.task.setStatus({taskId:e,statusId:3}).subscribe(function(e){1==e.result?t.loadDeliveryTasks():console.log(e)})},e=k([Object(o.n)({selector:"app-delivery",template:n("wmGV"),styles:[n("2xrQ")]}),N("design:paramtypes",[u.a,D.a,s.a])],e)}(),A=function(){function e(e,t){this.data=e,this.session=t}return e.prototype.connect=function(e){return this.data.deliveryTasksById(this.session.userId).pipe(Object(b.a)(function(e){var t=new Date;return e=(e=e.filter(function(e){return t.getHours()>13?"Evening"==e.timeSlot:"Morning"==e.timeSlot})).map(function(e){return e.customerName=e.firstname+" "+e.lastname,delete e.firstname,delete e.lastname,e})}))},e.prototype.disconnect=function(e){this.data.deliveryTasksSubject.complete()},e}(),q=n("7/2B"),j=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},L=[{path:"",component:c,children:[{path:"customers",component:v,canActivate:[q.a]},{path:"orders",component:S,canActivate:[q.a]},{path:"food",component:O,canActivate:[q.a]},{path:"delivery",component:R,canActivate:[q.a]}]}],E=function(){function e(){}return e=j([Object(o.K)({imports:[a.e.forChild(L)],exports:[a.e]})],e)}(),M=n("a6Df"),P=n("gIcY"),z=n("K9Ia"),H=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},G=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},V=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,l)}s((o=o.apply(e,t||[])).next())})},_=function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=o[2&a[0]?"return":a[0]?"throw":"next"])&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[0,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Y=function(){function e(e,t,n){this.fb=e,this.data=t,this.order=n,this.fabClose=new o.x,this.addFab=!1,this.existingCustomer=!0,this.finalStep=!1,this.clickEvent=new z.a,this.customerSelectionEvent=this.clickEvent.asObservable(),this.morningStartTime={hour:8,minute:0,meriden:"AM",format:12},this.morningEndTime={hour:12,minute:0,meriden:"PM",format:12},this.eveningStartTime={hour:6,minute:0,meriden:"PM",format:12},this.eveningEndTime={hour:9,minute:0,meriden:"PM",format:12},this.mealPlans=[],this.mealSizes=[],this.foodTypes=[],this.times=[],this.salads=[],this.saladsForSort=[],this.customers=[],this.orders=[],this.saladMaxCount=0,this.selectedCount=0,this.loadData()}return e.prototype.loadData=function(){var e=this;this.data.getIt("meals").subscribe(function(t){e.mealPlans=t}),this.data.getIt("salads").subscribe(function(t){e.salads=t,e.saladsForSort=t}),this.data.getIt("veg_nonveg").subscribe(function(t){e.foodTypes=t}),this.data.getIt("o_d_timeslot").subscribe(function(t){e.times=t}),this.data.getIt("customers").subscribe(function(t){e.customers=t}),this.data.getIt("m_types").subscribe(function(t){e.mealSizes=t})},e.prototype.updateSelectedCount=function(e,t){this.selectedCount=e,e>this.saladMaxCount&&window.alert("You have selected maximum number of salads for your meal plan!")},e.prototype.setMaxCount=function(e){this.saladMaxCount=Number(e)},e.prototype.selectionChange=function(e){var t=this;if(2==e.selectedIndex){if(this.existingCustomer){var n=Number(this.customerForm.controls.customerId.value);this.data.getItWhere("customers","id",n).then(function(e){t.deliveryForm.controls.deliveryAddress.setValue(e.address),t.deliveryForm.controls.deliveryArea.setValue(e.area),t.deliveryForm.controls.deliveryContact.setValue(e.mobileNumber)})}else this.deliveryForm.controls.deliveryAddress.setValue(this.customerForm.controls.address.value),this.deliveryForm.controls.deliveryArea.setValue(this.customerForm.controls.area.value),this.deliveryForm.controls.deliveryContact.setValue(this.customerForm.controls.mobileNumber.value);this.finalStep=!0}else this.finalStep=!1},e.prototype.onSelectFoodType=function(e){3==e.value?this.saladsForSort=this.salads:1==e.value?this.saladsForSort=this.order.sortSalads(this.salads,"Veg"):2==e.value&&(this.saladsForSort=this.order.sortSalads(this.salads,"Non-Veg"))},e.prototype.submitOrder=function(){return V(this,void 0,void 0,function(){var e,t,n,o,r,a,i,l,s,m,d,c,u,f=this;return _(this,function(p){switch(p.label){case 0:return e=this.orderForm.value,t=this.deliveryForm.value,n=this.customerForm.value,o=!0,this.existingCustomer?[3,6]:[4,this.order.addCustomer(this.customerForm.value)];case 1:return i=p.sent(),a=Number(i),t.deliveryAddress!=n.address||t.deliveryArea!=n.area||t.deliveryContact!=n.mobileNumber?[3,3]:[4,this.data.getItWhere("customers","id",a)];case 2:return l=p.sent(),r=parseInt(l.addressId),[3,5];case 3:return[4,this.order.addCustomerAddress({address:t.deliveryAddress,area:t.deliveryArea,mobileNumber:t.deliveryContact,customerId:a})];case 4:null!=(s=p.sent())?r=Number(s):o=!1,p.label=5;case 5:return[3,8];case 6:return a=this.customerForm.value.customerId,[4,this.data.getItWhere("customers","id",a)];case 7:m=p.sent(),r=parseInt(m.addressId),p.label=8;case 8:return null==a||1!=o?[3,11]:(this.addFab=!1,[4,this.order.getDeliveryCount(e.mealId)]);case 9:return d=p.sent(),[4,this.order.addSelectedSalads(e.saladId,d)];case 10:c=p.sent(),u={statusId:2,paymentId:3,deliveryAddressId:r,timeSlotId:parseInt(t.timeSlotId),morningTimeSlot:this.formatTimeSlot(t.morningStart,t.morningEnd),eveningTimeSlot:this.formatTimeSlot(t.eveningStart,t.eveningEnd),mealId:parseInt(e.mealId),taskCount:Number(d),foodTypeId:parseInt(e.preferredFoodTypeId),mealTypeId:parseInt(e.mealSize),selectedSalads:c,customerId:parseInt(this.order.addCustomerIdForOrder(a))},this.order.addOrder(u).then(function(e){f.fabClose.emit(!1),f.order.updateOrders.next(!0)}),p.label=11;case 11:return[2]}})})},e.prototype.formatTimeSlot=function(e,t){return e+" - "+t},e.prototype.mobileNoValidation=function(e){var t=String.fromCharCode(e.charCode);8==e.keyCode||/[0-9\+\-\ ]/.test(t)||e.preventDefault()},e.prototype.ngOnInit=function(){var e=this,t={firstname:new P.b("",P.l.required),lastname:new P.b("",P.l.required),mobileNumber:new P.b("",P.l.compose([P.l.required,P.l.minLength(10)])),email:new P.b("",P.l.email),address:new P.b("",P.l.required),area:new P.b("",P.l.required)},n={customerId:new P.b("",P.l.required)};this.customerForm=new P.c(n),this.customerSelectionEvent.subscribe(function(o){o?(e.existingCustomer=!0,e.customerForm=new P.c(n)):(e.existingCustomer=!1,e.customerForm=new P.c(t))});var o={mealId:new P.b("",P.l.required),preferredFoodTypeId:new P.b("",P.l.required),saladId:new P.b("",P.l.required),saladSpecs:new P.b,mealSize:new P.b("",P.l.required)};this.orderForm=new P.c(o);var r={deliveryAddress:new P.b("",P.l.required),deliveryArea:new P.b("",P.l.required),deliveryContact:new P.b("",P.l.required),timeSlotId:new P.b("",P.l.required),morningStart:new P.b("",P.l.required),morningEnd:new P.b("",P.l.required),eveningStart:new P.b("",P.l.required),eveningEnd:new P.b("",P.l.required)};this.deliveryForm=new P.c(r)},e.prototype.ngAfterViewInit=function(){},H([Object(o.Ma)("stepper"),G("design:type",Object)],e.prototype,"stepper",void 0),H([Object(o.R)(),G("design:type",Object)],e.prototype,"fabClose",void 0),e=H([Object(o.n)({selector:"app-add-orders",template:n("W298"),styles:[n("vy+Y")]}),G("design:paramtypes",[P.a,u.a,g.a])],e)}();n.d(t,"AdminModule",function(){return K});var B=function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},K=function(){function e(){}return e=B([Object(o.K)({imports:[r.b,E,M.a],declarations:[c,v,S,Y,O,R]})],e)}()},qmxm:function(e,t){e.exports=".sidenav-layout-container {\n  height: 1000px; }\n\n.sidenav-panel {\n  width: 250px;\n  height: 100%; }\n\n.sidenav-container {\n  height: 100%; }\n\n.admin-outlet {\n  padding: 10px; }\n"},uCx5:function(e,t){e.exports='<button (click)="addFab = !addFab" class="add-fab" color="accent" mat-fab>\n  <mat-icon>add</mat-icon>\n</button>\n<h2 class="mat-h2">Orders</h2>\n<div *ngIf="!addFab" class="orders-layout mat-elevation-z8">\n  <table #table [dataSource]="orderDataSource" mat-table>\n    <ng-container matColumnDef="id">\n      <th mat-header-cell *matHeaderCellDef>ID</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.id}}</td>\n    </ng-container>\n    <ng-container matColumnDef="date">\n      <th mat-header-cell *matHeaderCellDef>Date</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.date}}</td>\n    </ng-container>\n    <ng-container matColumnDef="mealName">\n      <th mat-header-cell *matHeaderCellDef>Meal Plan</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.mealName}}</td>\n    </ng-container>\n    <ng-container matColumnDef="mealSize">\n      <th mat-header-cell *matHeaderCellDef>Meal Size</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.mealSize}}</td>\n    </ng-container>\n    <ng-container matColumnDef="foodType">\n      <th mat-header-cell *matHeaderCellDef>Food Type</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.foodType}}</td>\n    </ng-container>\n    <ng-container matColumnDef="status">\n      <th mat-header-cell *matHeaderCellDef>Status</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.orderStatus}}</td>\n    </ng-container>\n    <ng-container matColumnDef="payment">\n      <th mat-header-cell *matHeaderCellDef>Payment</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.paymentStatus}}</td>\n    </ng-container>\n    <ng-container matColumnDef="customerId">\n      <th mat-header-cell *matHeaderCellDef>CustomerID</th>\n      <td mat-cell *matCellDef="let order  ; let i = index; ">{{order.customerId}}</td>\n    </ng-container>\n    <tr mat-header-row *matHeaderRowDef="orderDataColumns"></tr>\n    <tr mat-row *matRowDef="let row; columns: orderDataColumns;"></tr>\n  </table>\n</div>\n\n<div *ngIf="addFab" class="add-layout">\n  <app-add-orders (fabClose)="addFab = $event"></app-add-orders>\n</div>\n'},"vy+Y":function(e,t){e.exports=".time-picker-button {\n  padding: 0;\n  margin: 0;\n  min-width: 44px; }\n"},w8Oo:function(e,t){e.exports='<h2 class="mat-h2">Food Orders</h2>\n<div class="food-table mat-elevation-z4">\n\t<table mat-table #table matSort [dataSource]="foodTasksDataSource">\n\t\t<ng-container *ngFor="let column of columns" [matColumnDef]="column.columnDef">\n\t\t\t<th mat-header-cell *matHeaderCellDef>{{ column.header }}</th>\n      <td mat-cell *matCellDef="let foodTask  ; let i = index; ">{{ column.cell(foodTask) }}</td>\n\t\t</ng-container>\n\t\t<ng-container [matColumnDef]="actionColumn.columnDef">\n\t\t\t<th mat-header-cell [ngClass]="\'mat-table-column\'" *matHeaderCellDef>{{ actionColumn.header }}</th>\n      <td mat-cell *matCellDef="let foodTask  ; let i = index; ">\n\t\t\t\t<button color="accent" (click)="setStatusComplete(actionColumn.cell(foodTask))" mat-button>DONE!</button>\n      </td>\n\t\t</ng-container>\n\t\t<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>\n\t</table>\n</div>'},wmGV:function(e,t){e.exports='<h2 class="mat-h2">Deliveries</h2>\n<div class="table-container mat-elevation-z4">\n  <table mat-table #table matSort [dataSource]="deliveryTasksDataSource">\n    <ng-container *ngFor="let column of columns" [matColumnDef]="column.columnDef">\n      <th mat-header-cell *matHeaderCellDef>{{ column.header }}</th>\n      <td mat-cell *matCellDef="let deliveryTask  ; let i = index; ">{{ column.cell(deliveryTask) }}</td>\n    </ng-container>\n    <ng-container [matColumnDef]="actionColumn.columnDef">\n      <th mat-header-cell *matHeaderCellDef>{{ actionColumn.header }}</th>\n      <td mat-cell *matCellDef="let deliveryTask  ; let i = index; ">\n        <button color="accent" (click)="setStatusComplete(actionColumn.cell(deliveryTask))" mat-button>DONE!</button>\n      </td>\n    </ng-container>\n    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>\n  </table>\n</div>\n'}}]);